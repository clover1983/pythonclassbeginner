<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Python Class 11 · Comparison & Bitwise Operators</title>
  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 UMD + ReactDOM UMD (development builds) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel Standalone for in-browser JSX transform -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Pyodide v0.29: real Python in browser -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.29.0/full/pyodide.js"></script>
  <style>
    .spin { animation: spin 1s linear infinite; }
    @keyframes spin { from {transform:rotate(0)} to {transform:rotate(360deg)} }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }
  </style>
</head>
<body class="bg-slate-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useState } = React;

    // --- Boot Pyodide (v0.29) and inject helpers ---
    const pyodideReadyPromise = (async () => {
      const p = await loadPyodide({
        indexURL: "https://cdn.jsdelivr.net/pyodide/v0.29.0/full/"
      });
      await p.runPythonAsync([
        "import sys, io",
        "def _auto_strip_lines(src):",
        "    s = src.replace('\\r\\n','\\n').replace('\\r','\\n')",
        "    lines = s.split('\\n')",
        "    # keep indentation; only trim the end of each line",
        "    return '\\n'.join([ln.rstrip() for ln in lines])",
        "",
        "def run_user(src):",
        "    code = _auto_strip_lines(src)",
        "    glb = {}",
        "    _out = io.StringIO(); _err = io.StringIO()",
        "    old_out, old_err = sys.stdout, sys.stderr",
        "    sys.stdout, sys.stderr = _out, _err",
        "    try:",
        "        exec(code, glb, glb)",
        "    finally:",
        "        sys.stdout, sys.stderr = old_out, old_err",
        "    return {'glb': glb, 'out': _out.getvalue(), 'err': _err.getvalue(), 'code': code}",
      ].join('\n'));
      return p;
    })().catch(e => {
      console.error("Pyodide init failed:", e);
      alert("Pyodide init failed: " + e.message);
    });

    function usePyRunner() {
      const [pyodide, setPyodide] = useState(null);
      const [err, setErr] = useState(null);
      useEffect(() => {
        let mounted = true;
        pyodideReadyPromise.then(p => mounted && setPyodide(p)).catch(e => setErr(e));
        return () => { mounted = false; };
      }, []);
      return { pyodide, err };
    }

    // Keep glb as PyProxy; convert strings safely
    async function runUser(pyodide, code) {
      const run_user = pyodide.globals.get("run_user");
      const res = run_user(code); // dict PyProxy
      const getJs = (obj, key) => {
        const v = obj.get(key);
        return (v && typeof v.toJs === "function") ? v.toJs() : v;
      };
      const glb = res.get("glb");                 // PyProxy(dict)
      const out = getJs(res, "out");              // string
      const err = getJs(res, "err");              // string
      const codeNorm = getJs(res, "code");        // string
      res.destroy && res.destroy();
      return { glb, out, err, code: codeNorm };
    }

    // Small helpers
    function approx(a,b,eps=1e-9){ return Math.abs(a-b) < eps; }

    function Code({children}){
      return <pre className="bg-gray-950 text-gray-100 p-4 rounded-2xl text-sm overflow-auto shadow-inner mono"><code>{children}</code></pre>;
    }
    function Card({title, children, footer}){
      return (
        <div className="rounded-2xl shadow-lg border border-gray-200 bg-white p-5">
          <div className="text-xl font-semibold mb-3">{title}</div>
          <div className="space-y-3">{children}</div>
          {footer && <div className="pt-4 mt-4 border-t text-sm text-gray-600">{footer}</div>}
        </div>
      );
    }
    function Pill({ok, text}){
      const cls = ok == null ? "bg-gray-100 text-gray-800" : ok ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800";
      return <span className={"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium " + cls}>{text}</span>;
    }
    function Loader({text="Loading Python..."}){
      return (
        <div className="inline-flex items-center gap-2 text-sm text-gray-600">
          <svg className="w-4 h-4 spin" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" strokeWidth="3" opacity="0.3"/><path d="M21 12a9 9 0 0 0-9-9" stroke="currentColor" strokeWidth="3"/></svg>
          <span>{text}</span>
        </div>
      );
    }

    function Intro(){
      return (
        <Card title="Class 11: Comparisons · Logic · Identity · Membership · Bitwise">
          <p>Goal: Master Python's decision and testing operators, including chained comparisons and bitwise tricks.</p>
          <ul className="list-disc ml-6 space-y-1">
            {/* previously learned (Class 2) */}
            <li>
              <b>Arithmetic Operators</b> (already learned in Class 2):
              <span className="mono"> +</span>, <span className="mono"> -</span>, <span className="mono"> *</span>,
              <span className="mono"> /</span>, <span className="mono"> //</span>, <span className="mono"> %</span>,
              <span className="mono"> **</span>.
            </li>
            <li>
              <b>Assignment Operators</b> (already learned in Class 2):
              <span className="mono"> =</span>, <span className="mono"> +=</span>, <span className="mono"> -=</span>,
              <span className="mono"> *=</span>, <span className="mono"> /=</span>, <span className="mono"> %=</span>,
              <span className="mono"> //=</span>, <span className="mono"> **=</span>.
            </li>

            {/* this class focus */}
            <li>
              <b>Comparison</b>: <span className="mono">==</span>, <span className="mono">!=</span>, <span className="mono">&lt;</span>, <span className="mono">&gt;</span>, <span className="mono">&lt;=</span>, <span className="mono">&gt;=</span>.
            </li>
            <li>
              <b>Chaining</b>: <span className="mono">1 &lt; x &lt; 10</span> is equivalent to <span className="mono">(1 &lt; x) and (x &lt; 10)</span> but evaluated in one pass.
            </li>
            <li>
              <b>Logical</b>: <span className="mono">and</span>, <span className="mono">or</span>, <span className="mono">not</span> combine booleans; use parentheses to control precedence.
            </li>
            <li>
              <b>Identity</b>: <span className="mono">is</span>, <span className="mono">is not</span> compare object identity (same object), not values.
            </li>
            <li>
              <b>Membership</b>: <span className="mono">in</span>, <span className="mono">not in</span> test containment for strings, lists, sets, etc.
            </li>
            <li>
              <b>Bitwise (integers)</b>: <span className="mono">&amp;</span>, <span className="mono">|</span>, <span className="mono">^</span>, <span className="mono">~</span>, <span className="mono">&lt;&lt;</span>, <span className="mono">&gt;&gt;</span> operate on the binary representation.
            </li>
          </ul>
        </Card>
      );
    }

    // Generic quiz component
    function PyQuiz({
      id,
      title,
      prompt,
      starter = "",
      // 新增两个可选内容：引导提示（半对/引导思路）与最终答案
      guide,                 // e.g. "提示思路/不完全代码"
      solution,              // e.g. "完全正确的参考解"
      example,               // 兼容老参数：当作 solution 用
      // 解锁阈值（可按题目定制）
      minTriesForGuide = 0,      // 尝试 ≥ 3 次才解锁引导提示
      minTriesForSolution = 5,   // 尝试 ≥ 5 次才解锁最终答案
      check
    }) {
      const { pyodide, err } = usePyRunner();
      const [code, setCode] = React.useState(starter);
      const [status, setStatus] = React.useState({ ok: null, text: "Waiting for input" });

      // 统计尝试次数（点击 Run 就 +1，不管对错；你也可以改成“错误时才 +1”）
      const [tries, setTries] = React.useState(0);

      // 控制展开
      const [showGuide, setShowGuide] = React.useState(false);
      const [showSolution, setShowSolution] = React.useState(false);

      // 兼容：如果传了 example，但没传 solution，则把 example 当成 solution
      const finalSolution = solution ?? example ?? null;

      async function run() {
        if (!pyodide) { setStatus({ ok: null, text: "Python not ready" }); return; }
        setStatus({ ok: null, text: "Running..." });

        // 每次点击都记一次尝试
        setTries(t => t + 1);

        try {
          const res = await runUser(pyodide, code);
          const glb = res.glb;
          const out = res.out;
          const err = res.err;
          const codeNorm = res.code;

          const get = (name) => {
            const pyv = glb.get(name);
            if (pyv === undefined || pyv === null) return undefined;
            return (typeof pyv.toJs === "function") ? pyv.toJs() : pyv;
          };

          const qpass = await check({ glb, out, err, code: codeNorm, get });

          // 变量快照
          let snapshot = {};
          try {
            const ks = glb.keys();
            let names = (typeof ks.toJs === "function") ? ks.toJs() : [];
            names = Array.from(names).filter(n => n !== "__builtins__");
            for (const k of names) {
              const v = glb.get(k);
              snapshot[k] = (v && typeof v.toJs === "function") ? v.toJs() : v;
            }
          } catch (_) {}

          setStatus({
            ok: qpass,
            text: qpass ? "Correct" : "Not correct. See hints.",
            lastOut: out,
            lastErr: err,
            lastVars: snapshot
          });

          glb.destroy && glb.destroy();
        } catch (e) {
          setStatus({ ok: false, text: "Python error: " + e.message });
        }
      }

      // 还差多少次解锁
      const triesLeftForGuide = Math.max(0, minTriesForGuide - tries);
      const triesLeftForSolution = Math.max(0, minTriesForSolution - tries);

      return (
        <Card title={title}>
          <p>{prompt}</p>

          <textarea
            className="w-full h-96 border rounded-xl p-3 mono"
            value={code}
            onChange={e => setCode(e.target.value)}
            placeholder="Write Python here..."
          />

          <div className="flex items-center gap-3">
            <button onClick={run} className="px-4 py-2 rounded-xl bg-blue-600 text-white shadow">
              Run
            </button>
            <Pill ok={status.ok} text={status.text} />
            {(status.lastOut || status.lastErr) && (
              <div className="text-xs mono text-gray-700">
                {status.lastOut ? <div>stdout: {String(status.lastOut)}</div> : null}
                {status.lastErr ? <div>stderr: {String(status.lastErr)}</div> : null}
              </div>
            )}
            {status.lastVars && Object.keys(status.lastVars).length > 0 && (
              <pre className="bg-slate-100 text-slate-800 text-xs p-2 rounded mono overflow-auto">
                {JSON.stringify(status.lastVars, null, 2)}
              </pre>
            )}
            {!pyodide && <Loader />}
          </div>

          {/* 引导提示（不完全正确，解锁后可展开） */}
          {guide && (
            <div className="mt-3 flex items-center gap-2">
              <button
                onClick={() => setShowGuide(s => !s)}
                className={
                  "px-3 py-1 rounded-lg text-sm border " +
                  (tries >= minTriesForGuide ? "bg-white hover:bg-gray-50" : "bg-gray-100 text-gray-400 cursor-not-allowed")
                }
                disabled={tries < minTriesForGuide}
                title={tries < minTriesForGuide ? `Try ${minTriesForGuide - tries} more time(s) to unlock hint` : ""}
              >
                {showGuide ? "Hide hint" : (tries >= minTriesForGuide ? "Show hint" : `Hint locked (${triesLeftForGuide} left)`)}
              </button>
            </div>
          )}
          {guide && showGuide && tries >= minTriesForGuide && (
            <Code>{guide}</Code>
          )}

          {/* 最终答案/完全示例（到达更高阈值才解锁） */}
          {finalSolution && (
            <div className="mt-2 flex items-center gap-2">
              <button
                onClick={() => setShowSolution(s => !s)}
                className={
                  "px-3 py-1 rounded-lg text-sm " +
                  (tries >= minTriesForSolution
                    ? "bg-blue-600 text-white hover:bg-blue-700"
                    : "border bg-gray-100 text-gray-400 cursor-not-allowed")
                }
                disabled={tries < minTriesForSolution}
                title={tries < minTriesForSolution ? `Try ${minTriesForSolution - tries} more time(s) to unlock solution` : ""}
              >
                {showSolution ? "Hide solution" : (tries >= minTriesForSolution ? "Show solution" : `Solution locked (${triesLeftForSolution} left)`)}
              </button>
            </div>
          )}
          {finalSolution && showSolution && tries >= minTriesForSolution && (
            <Code>{finalSolution}</Code>
          )}
        </Card>
      );
    }

    // --- Bottom navigation (consistent spacing + same card style) ---
    function FooterNav({ homeHref = "index.html", nextHref = "#", nextLabel = "Next lesson" }) {
      return (
        <div className="rounded-2xl shadow-lg border border-gray-200 bg-white p-5 flex items-center justify-between">
          <a
            href={homeHref}
            className="inline-flex items-center gap-2 px-4 py-2 rounded-xl border hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-600"
          >
            <span className="mono">←</span>
            <span>Back to Homepage</span>
          </a>

          <a
            href={nextHref}
            className="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600"
          >
            <span>{nextLabel}</span>
            <span className="mono">→</span>
          </a>
        </div>
      );
    }

    function App(){
      const [score, setScore] = useState(0);
      const [done, setDone] = useState({});
      function onPass(key){
        if (!done[key]) {
          setDone(prev => ({...prev, [key]: true}));
          setScore(s => s + 1);
        }
      }
      const total = 20;
      const progress = Math.round(Object.keys(done).length/total*100);

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100">
          <header className="max-w-5xl mx-auto px-6 py-8">
            <h1 className="text-3xl font-bold tracking-tight">Python Class 11 · Comparison & Bitwise Operators</h1>
            <p className="text-gray-600 mt-1">Complete {total} quizzes. Real Python runs in your browser.</p>
          </header>

          <main className="max-w-5xl mx-auto px-6 pb-20 space-y-6">
            <div className="rounded-2xl border bg-white p-5 flex items-center gap-4 shadow-sm">
              <div className="w-28">
                <div className="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                  <div className="h-3 bg-blue-600" style={{ width: progress + "%" }} />
                </div>
              </div>
              <div className="text-sm text-gray-700">Progress: {Object.keys(done).length}/{total} · Score: {score}</div>
              <div className="ml-auto text-sm text-gray-500">Tip: Use the examples as a starting point.</div>
            </div>

            <Intro />

            {/* Q1–Q5: Comparison operators */}
            <PyQuiz
              id="q1"
              title="Q1 · equality =="
              prompt='Set a=10, b=10, ok = (a == b). Pass if ok is True and code uses "==".'
              guide={`a = 1\nb = 11\nok = (a == b)`}
              solution={`a = 10\nb = 10\nok = (a == b)`}
              check={({get, code}) => {
                const ok = get("ok");
                const used = /==/.test(code);
                const pass = used && ok === true;
                if (pass) onPass("q1");
                return pass;
              }}
            />

            <PyQuiz
              id="q2"
              title="Q2 · not equal !="
              prompt='Set a=7, b=3, ok = (a != b). Pass if ok is True and code uses "!=".'
              guide={`a = 4\nb = 4\nok = (a != b)`}
              solution={`a = 7\nb = 3\nok = (a != b)`}
              check={({get, code}) => {
                const ok = get("ok");
                const used = /!=/.test(code);
                const pass = used && ok === true;
                if (pass) onPass("q2");
                return pass;
              }}
            />

            <PyQuiz
              id="q3"
              title="Q3 · greater-than >"
              prompt='Make a=5, b=2, res = (a > b). Pass if res is True and code uses ">".'
              guide={`a = 4\nb = 6\nres = (a > b)`}
              solution={`a = 5\nb = 2\nres = (a > b)`}
              check={({get, code}) => {
                const res = get("res");
                const used = />/.test(code);
                const pass = used && res === true;
                if (pass) onPass("q3");
                return pass;
              }}
            />

            <PyQuiz
              id="q4"
              title="Q4 · less-or-equal <="
              prompt='Make a=3, b=3, res = (a <= b). Pass if res is True and code uses "<=".'
              guide={`a = 4\nb = 2\nres = (a <= b)`}
              solution={`a = 3\nb = 3\nres = (a <= b)`}
              check={({get, code}) => {
                const res = get("res");
                const used = /<=/.test(code);
                const pass = used && res === true;
                if (pass) onPass("q4");
                return pass;
              }}
            />

            <PyQuiz
              id="q5"
              title="Q5 · greater-or-equal >="
              prompt='Make a=10, b=7, res = (a >= b). Pass if res is True and code uses ">=".'
              guide={`a = 3\nb = 8\nres = (a >= b)`}
              solution={`a = 10\nb = 7\nres = (a >= b)`}
              check={({get, code}) => {
                const res = get("res");
                const used = />=/.test(code);
                const pass = used && res === true;
                if (pass) onPass("q5");
                return pass;
              }}
            />

            {/* Q6–Q7: Chained comparisons */}
            <PyQuiz
              id="q6"
              title="Q6 · chained comparison"
              prompt='Let x=7; is_between = 1 < x < 10. Pass if True and code uses the chained form "1 < x < 10".'
              guide={`x = 12\nis_between = 1 < x < 10`}
              solution={`x = 7\nis_between = 1 < x < 10`}
              check={({get, code}) => {
                const v = get("is_between");
                const used = /1\s*<\s*x\s*<\s*10/.test(code);
                const pass = used && v === true;
                if (pass) onPass("q6");
                return pass;
              }}
            />

            <PyQuiz
              id="q7"
              title="Q7 · chained comparison (expanded)"
              prompt='Let x=7; left = (1 < x) and (x < 10). Pass if left is True and code uses "and".'
              guide={`x = 11\nleft = (6 < x) and (x < 10)`}
              solution={`x = 7\nleft = (1 < x) and (x < 10)`}
              check={({get, code}) => {
                const v = get("left");
                const used = /\band\b/.test(code);
                const pass = used && v === true;
                if (pass) onPass("q7");
                return pass;
              }}
            />

            {/* Q8–Q10: Logical operators */}
            <PyQuiz
              id="q8"
              title="Q8 · and + not"
              prompt='Let a=True, b=False; c = a and not b. Pass if c is True and code uses "and" and "not".'
              guide={`a = False\nb = False\nc = a or not b`}
              solution={`a = True\nb = False\nc = a and not b`}
              check={({get, code}) => {
                const c = get("c");
                const used = /\band\b/.test(code) && /\bnot\b/.test(code);
                const pass = used && c === true;
                if (pass) onPass("q8");
                return pass;
              }}
            />

            <PyQuiz
              id="q9"
              title="Q9 · or"
              prompt='Let a=False, b=False; c = a or (not b). Pass if c is True and code uses "or".'
              guide={`a = False\nb = True\nc = a and (not b)`}
              solution={`a = False\nb = False\nc = a or (not b)`}
              check={({get, code}) => {
                const c = get("c");
                const used = /\bor\b/.test(code);
                const pass = used && c === true;
                if (pass) onPass("q9");
                return pass;
              }}
            />

            <PyQuiz
              id="q10"
              title="Q10 · precedence with parentheses"
              prompt='Set res = (1 < 2) and (3 < 4 or 5 < 1). Pass if res is True and code uses both "and" and "or".'
              guide={`res = (2 < 1) and (4 < 3 or 1 < 5)`}
              solution={`res = (1 < 2) and (3 < 4 or 5 < 1)`}
              check={({get, code}) => {
                const res = get("res");
                const used = /\band\b/.test(code) && /\bor\b/.test(code);
                const pass = used && res === true;
                if (pass) onPass("q10");
                return pass;
              }}
            />

            {/* Q11–Q12: Identity operators */}
            <PyQuiz
              id="q11"
              title="Q11 · identity: is"
              prompt='Let lst=[1,2]; c = lst; same = (c is lst). Pass if same is True and code uses "is".'
              guide={`lst = [3,4]\nc = [4,5]\nsame = (c is lst)`}
              solution={`lst = [1,2]\nc = lst\nsame = (c is lst)`}
              check={({get, code}) => {
                const a = get("a");
                const b = get("b");
                const diff = get("diff");
                const usedIsNot = /\bis\s+not\b/.test(code);
                const initA = /a\s*=\s*\[\s*1\s*,\s*2\s*\]/.test(code);
                const initB = /b\s*=\s*\[\s*1\s*,\s*2\s*\]/.test(code);
                const aCorrect = Array.isArray(a) && a[0] === 1 && a[1] === 2;
                const bCorrect = Array.isArray(b) && b[0] === 1 && b[1] === 2;
                const ok = usedIsNot && initA && initB && aCorrect && bCorrect && diff === true;
                if (ok) onPass("q12");
                return ok;
              }}
            />

            <PyQuiz
              id="q12"
              title="Q12 · identity: is not"
              prompt='Let a=[1,2]; b=[1,2]; diff = (a is not b). Pass if diff is True and code uses "is not".'
              guide={`a = [3,4]\nb = [4,5]\ndiff = (a is not b)`}
              solution={`a = [1,2]\nb = [1,2]\ndiff = (a is not b)`}
              check={({get, code}) => {
                const diff = get("diff");
                const used = /\bis\s+not\b/.test(code);
                const pass = used && diff === true;
                if (pass) onPass("q12");
                return pass;
              }}
            />

            {/* Q13–Q14: Membership */}
            <PyQuiz
              id="q13"
              title="Q13 · membership: in (string)"
              prompt='Let s="banana"; has = "an" in s. Pass if has is True and code uses "in".'
              guide={`s = "orange"\nhas = "an" in s`}
              solution={`s = "banana"\nhas = "an" in s`}
              check={({get, code}) => {
                const has = get("has");
                const initBanana = /s\s*=\s*["']banana["']/.test(code);     // s = "banana"
                const checkSub   = /["']an["']\s+in\s+s/.test(code);        // "an" in s
                const usedIn = /\bin\b/.test(code);
                const ok = initBanana && checkSub && usedIn && has === true;
                if (ok) onPass("q13");
                return ok;
              }}
            />

            <PyQuiz
              id="q14"
              title="Q14 · membership: not in (list)"
              prompt='Let items=[1,2,3]; miss = 4 not in items. Pass if miss is True and code uses "not in".'
              guide={`items = [1,2,3,4]\nmiss = 5 not in items`}
              solution={`items = [1,2,3]\nmiss = 4 not in items`}
              check={({get, code}) => {
                const miss = get("miss");
                const initItems = /items\s*=\s*\[\s*1\s*,\s*2\s*,\s*3\s*\]/.test(code);   // items = [1,2,3]
                const checkNotIn = /\b4\s+not\s+in\s+items\b/.test(code);                // 4 not in items
                const usedNotIn = /\bnot\s+in\b/.test(code);
                const ok = initItems && checkNotIn && usedNotIn && miss === true;
                if (ok) onPass("q14");
                return ok;
              }}
            />

            {/* Q15–Q20: Bitwise */}
            <PyQuiz
              id="q15"
              title="Q15 · bitwise AND &"
              prompt='Use a=0b1100 and b=0b1010; r = a & b. Pass if r==8 and code uses "&".'
              guide={`a = 0b10100\nb = 0b1110\nr = a & b`}
              solution={`a = 0b1100\nb = 0b1010\nr = a & b`}
              check={({get, code}) => {
                const r = get("r");
                const used = /&/.test(code);
                const pass = used && r === 8;
                if (pass) onPass("q15");
                return pass;
              }}
            />

            <PyQuiz
              id="q16"
              title="Q16 · bitwise OR |"
              prompt='Use a=0b0101 and b=0b1000; r = a | b. Pass if r==13 and code uses "|".'
              guide={`a = 0b10100\nb = 0b1110\nr = a | b`}
              solution={`a = 0b0101\nb = 0b1000\nr = a | b`}
              check={({get, code}) => {
                const r = get("r");
                const used = /\|/.test(code);
                const pass = used && r === 13;
                if (pass) onPass("q16");
                return pass;
              }}
            />

            <PyQuiz
              id="q17"
              title="Q17 · bitwise XOR ^"
              prompt='Use a=0b1111 and b=0b0101; r = a ^ b. Pass if r==10 and code uses "^".'
              guide={`a = 0b10100\nb = 0b1110\nr = a ^ b`}
              solution={`a = 0b1111\nb = 0b0101\nr = a ^ b`}
              check={({get, code}) => {
                const r = get("r");
                const used = /\^/.test(code);
                const pass = used && r === 10;
                if (pass) onPass("q17");
                return pass;
              }}
            />

            <PyQuiz
              id="q18"
              title="Q18 · bitwise NOT ~"
              prompt='Let a=5; r = ~a. Pass if r==-6 and code uses "~".'
              guide={`a = 7\nr = ~a`}
              solution={`a = 5\nr = ~a`}
              check={({get, code}) => {
                const r = get("r");
                const used = /~\s*a\b/.test(code);
                const pass = used && r === -6;
                if (pass) onPass("q18");
                return pass;
              }}
            />

            <PyQuiz
              id="q19"
              title="Q19 · left shift <<"
              prompt='Let a=3; l = a << 2. Pass if l==12 and code uses "<<".'
              guide={`a = 4\nl = a << 5`}
              solution={`a = 3\nl = a << 2`}
              check={({get, code}) => {
                const l = get("l");
                const used = /<</.test(code);
                const pass = used && l === 12;
                if (pass) onPass("q19");
                return pass;
              }}
            />

            <PyQuiz
              id="q20"
              title="Q20 · right shift >>"
              prompt='Let a=20; r = a >> 2. Pass if r==5 and code uses ">>".'
              guide={`a = 11\nr = a >> 3`}
              solution={`a = 20\nr = a >> 2`}
              check={({get, code}) => {
                const r = get("r");
                const used = />>/.test(code);
                const pass = used && r === 5;
                if (pass) onPass("q20");
                return pass;
              }}
            />

            <Card title="Recap & Tips" footer="Think in booleans; group with parentheses; remember identity vs equality.">
              <ul className="list-disc ml-6 space-y-1">
                <li>
                  <b>Chaining</b>: <span className="mono">a &lt; b &lt; c</span> is the same as <span className="mono">(a &lt; b) and (b &lt; c)</span>, but more readable and evaluated once per operand.
                </li>
                <li>
                  <b>Equality vs Identity</b>: <span className="mono">==</span> compares values; <span className="mono">is</span> compares whether two names point to the <i>same object</i>.
                </li>
                <li>
                  <b>Membership</b>: strings check substrings; lists/sets check elements. Use <span className="mono">not in</span> to negate.
                </li>
                <li>
                  <b>Logical precedence</b>: <span className="mono">not</span> &gt; <span className="mono">and</span> &gt; <span className="mono">or</span>. When unsure, add parentheses.
                </li>
                <li>
                  <b>Bitwise</b>: work on integers only. Quick memory: AND keeps common 1s, OR keeps any 1, XOR keeps different bits, <span className="mono">~</span> flips all bits, <span className="mono">&lt;&lt;/&gt;&gt;</span> shift left/right.
                </li>
              </ul>
            </Card>

            <FooterNav
              homeHref="index.html"
              nextHref="012.html"        // ← 改成你下一堂课的地址
              nextLabel="Next: Class 12"  // ← 改成你想显示的标题
            />

          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
